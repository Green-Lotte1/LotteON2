<html xmlns:th="http://www.thymeleaf.org"  xmlns:layout="http://www.thymeleaf.org/" layout:decorate="/cs/layout.html">
<head>
  <script>
    function confirm_delete(){
      if(confirm("ì •ë§ë¡œ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")){
        var link = document.querySelector('.btnDelete').getAttribute('data-link');
        window.location.href = link; // Redirect to the specified link
      }else{  // ì·¨ì†Œ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ
        alert("ì·¨ì†Œë˜ì—ˆìŠµë‹ˆë‹¤.");
      }
      return false;
    }

    // Success code alert
    const success = new URL(location.href).searchParams.get('success');
    var contextPath = "[[${@environment.getProperty('server.servlet.context-path')}]]";
    if(success == 300){
      alert('ê¸€ì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.');
    }
  </script>
</head>
  <section id="cs" layout:fragment = "content">
    <div class="qna">
      <nav>
        <div>
          <p>í™ˆ<span>></span>ë¬¸ì˜í•˜ê¸°</p>
        </div>
      </nav>
      <section class="view">
        <aside>
          <h2>ë¬¸ì˜í•˜ê¸°</h2>
          <ul>
            <li th:class="${#strings.equalsIgnoreCase(cate, 'member') ? 'on' : ''}">
              <a th:href="@{/cs/qna/list(group='qna', cate='member')}">íšŒì›</a>
            </li>
            <li th:class="${(cate=='coupon') ? 'on' : ''}"><a th:href="@{/cs/qna/list(group='qna',cate='coupon')}">ì¿ í°/ì´ë²¤íŠ¸</a></li>
            <li th:class="${(cate=='order') ? 'on' : ''}"><a th:href="@{/cs/qna/list(group='qna',cate='order')}">ì£¼ë¬¸/ê²°ì œ</a></li>
            <li th:class="${(cate=='delivery') ? 'on' : ''}"><a th:href="@{/cs/qna/list(group='qna',cate='delivery')}">ë°°ì†¡</a></li>
            <li th:class="${(cate=='cancel') ? 'on' : ''}"><a th:href="@{/cs/qna/list(group='qna',cate='cancel')}">ì·¨ì†Œ/ë°˜í’ˆ/êµí™˜</a></li>
            <li th:class="${(cate=='travel') ? 'on' : ''}"><a th:href="@{/cs/qna/list(group='qna',cate='travel')}">ì—¬í–‰/ìˆ™ë°•/í•­ê³µ</a></li>
            <li th:class="${(cate=='safe') ?'on' : ''}"><a th:href="@{/cs/qna/list(group='qna',cate='safe')}">ì•ˆì „ê±°ë˜</a></li>
          </ul>
        </aside>
        <article>
          <nav>
            <h2 class="title">[<span th:text="${boardDTO.typeName}"></span>] [[${boardDTO.title}]]</h2>
            <p>
              <span class="uid" th:text="${#strings.length(boardDTO.uid) >= 3 ? #strings.substring(boardDTO.uid, 0, 3) + '***' : #strings.substring(boardDTO.uid, 0, 1)+'*'}"></span>
              <span th:text="${#temporals.format(boardDTO.rdate, 'yy-MM-dd')}"></span><br>
              <div>
              <th:block th:each="file : ${boardDTO.fileDTOList}">
                  <img id="thumb" th:src="@{|/files/${file.sfile}|}"/>
                  <a th:href="@{/cs/qna/fileDownload(fno=${file.fno})}">ë‹¤ìš´ë¡œë“œ  [[${file.ofile}]]</a>
              </th:block>
          </div>
            </p>

          </nav>

          <div class="content">
            <p>
              [[${boardDTO.content}]]
            </p><br><br>
            <p>
              â€» í”¼ì‹± ê´€ë ¨ í”¼í•´ì‹ ê³ <br /><br />
              â–¶ ê²½ì°°ì²­ ì‚¬ì´ë²„ìˆ˜ì‚¬êµ­ (êµ­ë²ˆì—†ì´)182 :
              http://cyberbureau.police.go.kr<br />
              â–¶ KISA ì¸í„°ë„·ì¹¨í•´ëŒ€ì‘ì„¼í„° (êµ­ë²ˆì—†ì´)118 :
              http://www.krcert.or.kr<br />
              ê°ì‚¬í•©ë‹ˆë‹¤.<br />
            </p>

          </div>
          <section class="commentList">
            <article class="comment">
              <div th:if="${boardDTO.reply != null}">
                <h4>ğŸ‘‰[ë‹µë³€] <span th:text="${boardDTO.title}"></span></h4>
                <textarea class="content" name="content" th:text="${boardDTO.reply}" readonly></textarea>
              </div>
              <div th:unless="${boardDTO.reply != null}">
                <p class="empty">ë“±ë¡ëœ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤.</p>
              </div>
            </article>
          </section>
          <div>
            <a th:href="@{/cs/qna/list(group='qna',cate=${boardDTO.cate})}" class="btnQnAList">ëª©ë¡ë³´ê¸°</a>
            <button th:attr="data-link=@{/cs/qna/delete(bno=${boardDTO.bno})}" class="btnDelete" th:onclick="return confirm_delete()">ì‚­ì œí•˜ê¸°</button>
            <a th:href="@{/cs/qna/modify(bno=${boardDTO.bno})}" class="btnModify">ìˆ˜ì •í•˜ê¸°</a>
          </div>
        </article>
      </section>
    </div>
  </section>

